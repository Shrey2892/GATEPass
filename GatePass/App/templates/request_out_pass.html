<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Out Pass</title>
    {% load static %}
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css'%}">
    <link rel="stylesheet" href="{% static 'assets/vendor/boxicons/css/boxicons.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/vendor/quill/quill.snow.css'%}">
    <link rel="stylesheet" href="{% static 'assets/vendor/quill/quill.bubble.css'%}">
    <link rel="stylesheet" href="{% static 'assets/vendor/remixicon/remixicon.css'%}">
    <link rel="stylesheet" href="{% static 'assets/vendor/simple-datatables/style.css'%}">

    <!-- Template Main CSS File -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css'%}">
    <!-- Template Main CSS File -->
    <style>
        body {
            overflow-x: hidden;
            margin-left:70px;
            margin-top:50px;
        }
    </style>
</head>

<body>
    <div class="form-container">
        <section class="section">

            <div class="row">
                <div class="col-lg-6">

                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Outpass</h5>


                            <!-- {% if error %}
                            <p style="color:red;">{{ error }}</p>
                            {% endif %} -->

                            <!-- {% if error %}
                            <div class="alert alert-danger">
                                <ul>
                                    {% for field, error in error.items %}
                                    <li>{{ field }}: {{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %} -->

                            <!-- Horizontal Form -->
                            <form class="form" method="post" id="Gatepass" action="{% url 'request_out_pass' %}">
                                {% csrf_token %}
                                <!-- {% if error_message %}
                   <p style="color: red;">{{ error_message }}</p>
                {% endif %} -->




                                <div class="row mb-3">
                                    <label for="gatepassno" class="col-sm-2 col-form-label" name="purpose">Gate Pass
                                        No</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="gatepassno" name="gatepassno" unique
                                            required value="{{gatepassno}}">
                                    </div>


                                    {% if error %}
                                    <p style="color:red;">{{ error }}</p>
                                    {% endif %}


                                    <!-- {% if errors.gatepassno %}
                  <div class="text-danger">{{ errors.gatepassno }}</div>
                  {% endif %} -->
                                </div>

                                <div class="row mb-3">
                                    <label for="token" class="col-sm-2 col-form-label" name="token">Token</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="token" name="token" unique required
                                            value="{{token}}">
                                    </div>
                                    <!-- {% if errors.token %}
                  <div class="text-danger">{{ errors.token }}</div>
                  {% endif %} -->
                                </div>

                                <div class="row mb-3">
                                    <label for="vehicle_number" class="col-sm-2 col-form-label"
                                        name="vehicle_number">Vehicle
                                        Number</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="vehicle_number"
                                            name="vehicle_number" required readonly value="{{vehicle_number}}">
                                    </div>
                                </div>


                                <div class="row mb-3">
                                    <label for="driver_name" class="col-sm-2 col-form-label" name="driver_name">Driver
                                        Name</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="driver_name" name="driver_name"
                                            required readonly value="{{driver_name}}">
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <label for="owner_contact_no" class="col-sm-2 col-form-label"
                                        name="owner_contact_no">Contact
                                        No</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="owner_contact_no"
                                            name="owner_contact_no" required readonly value="{{owner_contact_no}}">
                                    </div>
                                    <!-- {% if errors.owner_contact_no %}
                  <div class="text-danger">{{ errors.owner_contact_no }}</div>
                  {% endif %} -->
                                </div>

                                <div class="row mb-3">
                                    <label for="purpose" class="col-sm-2 col-form-label" name="purpose">Purpose</label>
                                    <div class="col-sm-10">
                                        <select class="form-control" id="purpose" name="purpose" required readonly
                                            value="{{purpose}}">

                                            <option value="purchase">Purchase</option>
                                            <option value="delivery">Delivery</option>
                                            <option value="maintenance">Maintenance</option>
                                        </select>
                                    </div>
                                    <!-- <select name="purpose" id="id_purpose">
                    <option value="purchase">Purchase</option>
                    <option value="delivery">Delivery</option>
                    <option value="maintenance">Maintenance</option>
                </select> -->
                                </div>

                                <div class="row mb-3">
                                    <label for="Access_Area" class="col-sm-2 col-form-label" name="Access_Area">Access
                                        Area</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="Access_Area" name="Access_Area"
                                            required readonly value="{{Access_Area}}">
                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <label for="Restricted_Area" class="col-sm-2 col-form-label"
                                        name="restricted_Area">Restricted
                                        Area</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="Restricted_Area"
                                            name="Restricted_Area" readonly value="{{Restricted_Area}}">
                                    </div>
                                </div>




                                <!-- <div class="row mb-3">
                    <label for="created_at" class="col-sm-2 col-form-label" name="created_at">Created At</label>
                    <div class="col-sm-10">
                      <input type="datetime" class="form-control" id="created_at">
                    </div>
                  </div> -->
                                <!-- <fieldset class="row mb-3">
                    <legend class="col-form-label col-sm-2 pt-0">Radios</legend>
                    <div class="col-sm-10">
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="option1" checked>
                        <label class="form-check-label" for="gridRadios1">
                          First radio
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="option2">
                        <label class="form-check-label" for="gridRadios2">
                          Second radio
                        </label>
                      </div>
                      <div class="form-check disabled">
                        <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios3" value="option3" disabled>
                        <label class="form-check-label" for="gridRadios3">
                          Third disabled radio
                        </label>
                      </div>
                    </div>
                  </fieldset>
                  <div class="row mb-3">
                    <div class="col-sm-10 offset-sm-2">
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="gridCheck1">
                        <label class="form-check-label" for="gridCheck1">
                          Example checkbox
                        </label>
                      </div>
                    </div>
                  </div>-->
                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                    <button type="reset" class="btn btn-secondary">Reset</button>
                                </div>
                            </form><!-- End Horizontal Form -->

                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>


    <script src="{% static 'assets/vendor/apexcharts/apexcharts.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
    <script src="{% static 'assets/vendor/chart.js/chart.umd.js'%}"></script>
    <script src="{% static 'assets/vendor/echarts/echarts.min.js'%}"></script>
    <script src="{% static 'assets/vendor/quill/quill.js'%}"></script>
    <script src="{% static 'assets/vendor/simple-datatables/simple-datatables.js'%}"></script>
    <script src="{% static 'assets/vendor/tinymce/tinymce.min.js'%}"></script>
    <script src="{% static 'assets/vendor/php-email-form/validate.js'%}"></script>

    <!-- Template Main JS File -->
    <script src="{% static 'assets/js/main.js'%}"></script>
    <script>


        document.getElementById('gatepassno').addEventListener('blur', function () {
            const gatepassno = this.value;

            if (gatepassno) {
                fetch(`/fetch_out_pass/?gatepassno=${gatepassno}`)
                    .then(response => {
                        if (!response.ok) throw new Error('Gate Pass does not exist');
                        return response.json();
                    })
                    .then(data => {
                        // document.getElementById('gatepassno').value = data.gatepassno;
                        document.getElementById('token').value = data.token;
                        document.getElementById('vehicle_number').value = data.vehicle_number;
                        document.getElementById('driver_name').value = data.driver_name;
                        document.getElementById('owner_contact_no').value = data.owner_contact_no;
                        document.getElementById('purpose').value = data.purpose;
                        document.getElementById('Access_Area').value = data.Access_Area;
                        document.getElementById('Restricted_Area').value = data.Restricted_Area;
                        // document.getElementById('created_at').value = data.created_at;
                    })
                    .catch(error => {
                        alert(error.message);
                    });
            }
        });
    </script>
</body>

</html>
<!-- <form method="post">
        {% csrf_token %}
        <label for="gate_pass_number">Gate Pass Number:</label>
        <input type="text" id="gate_pass_number" name="gate_pass_number" required>
        <br>

        <label for="student_name">Student Name:</label>
        <input type="text" id="student_name" name="student_name" required readonly>
        <br>

        <label for="purpose">Purpose:</label>
        <input type="text" id="purpose" name="purpose" required readonly>
        <br>

        <label for="end_time">End Time:</label>
        <input type="datetime-local" id="end_time" name="end_time" required>
        <br>

        <button type="submit">Request Out Pass</button>
    </form> -->

<!-- <script>
        document.getElementById('gate_pass_number').addEventListener('blur', function () {
            const gatePassNumber = this.value;

            if (gatePassNumber) {
                fetch(`/fetch_out_pass/?gate_pass_number=${gatePassNumber}`)
                    .then(response => {
                        if (!response.ok) throw new Error('Out pass not found');
                        return response.json();
                    })
                    .then(data => {
                        document.getElementById('student_name').value = data.student_name;
                        document.getElementById('purpose').value = data.purpose;
                        document.getElementById('end_time').value = data.end_time;
                    })
                    .catch(error => {
                        alert(error.message);
                    });
            }
        });
    </script> -->
<!-- </body>
</html> -->